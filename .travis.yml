os: linux

dist: xenial

git:
  depth: 1

language: node_js

node_js:
  - 13.12.0 # Use Find and Replace to change

cache: npm

notifications:
  email: false

branches:
  only:
    - master
    - /^([0-9]|[1-9][0-9]*)\.([0-9]|[1-9][0-9]*)\.([0-9]|[1-9][0-9]*)(?:-([0-9A-Za-z-]+(?:\.[0-9A-Za-z-]+)*))?(?:\+[0-9A-Za-z-]+)?$/ # Semver, for pushed tags

jobs:
  include:
    # - stage: Check
    #   script: npm run check:lint
    #   name: Lint

    # - script: npm run check:typescript
    #   name: TypeScript

    # - script: npm run check:coverage
    #   name: Test and coverage

    # - script: npm run check:npm-audit
    #   name: npm audit

    # - script: npm run check:depcheck
    #   name: npm run check:depcheck

    - stage: Deploy
      os: osx
      name: Deploy
      script: "# Deploying..."
      deploy:
        provider: releases
        token:
          secure: 3CIodNacmjruDKVxuluS9HoDm8HhrMf7EsfbUbfo+u2v8/7SMoO8yX/ZN7VSkosRFzkH1o2UYSLrfsGColGaWqjfCbdFA/ufibOEtxq6Xx/0cIKT5Jb5NN8NsMP8/7n4wAyIHhNVt7y9Ov3YSHacIHEmhjOrnOgsgtuRsNiLSclhNUsXIhc0YZHTAydKzsMaWQnWZNENrNev4AddTL9K+2hekznYE8p13kPv5MbrSBJsMQc0T5HrcudgBMdrXZ9kk3dmW994kfbEz/LoXntqOG81c2NCCsRUqwyhK4luBuxbKDt9bpzk0/EocvD64pUEraiPICkLjUDqANKlkL2ZZsgw1DqZua82bm8gJyfLh43q949HYRa0xlWmEnKqIc0Fnt0JySctLUcpQG/P0wnM2rShsydsS2CJrEMHb9TEHJye/EDN3Fe7qqOWYGiCTolDQvmbudfTM8YcioILQw8EZkxQU3BrIHv5mKlTTzZchCRI1Zbi6kTMst1wtXcNbliF34fbBg/ZR5PFIxUNMF8zuRRvHpnz5Ke5pjLMTUObf9e2vmpT+rl/cbWPzgUJVEfDWkHnZsSmI3LB6x+/Ly7L8+NGmZSEifmtA72iaK3Y0Hs3fsTGWN2qQMuJg2Y2QEUcy+lLnd/sR27JrhoAjxgBeoF03MVKKJURheeZKFPk0lI=
        file: artifacts/electronPackager/Orange (macOS).zip # Use Find and Replace to change
        draft: true
        on:
          tags: true
        edge: true

      before_deploy: npm run create-package
